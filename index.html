<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø³ØªÙˆÙ‰ Ø®Ø²Ø§Ù† Ø§Ù„Ù…Ø§Ø¡ - </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Tajawal', Arial, sans-serif;
      background: linear-gradient(135deg, #e0f7fa 0%, #bbdefb 100%);
      margin: 0;
      padding: 15px;
      line-height: 1.6;
      color: #333;
      min-height: 100vh;
    }
    
    .container {
      max-width: 100%;
      margin: 0 auto;
      padding: 10px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 20px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 50, 100, 0.1);
    }
    
    .header h1 {
      color: #007bb6;
      font-size: 28px;
      margin: 10px 0;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
    }
    
    .header h2 {
      color: #005a8d;
      font-size: 22px;
      margin: 10px 0;
    }
    
    .dashboard {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .tank-section {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 50, 100, 0.1);
      text-align: center;
    }
    
    .tank-container {
      position: relative;
      width: 180px;
      height: 240px;
      margin: 0 auto 15px;
      box-shadow: 0 4px 15px rgba(0, 50, 100, 0.25);
      border-radius: 10px;
      overflow: hidden;
      background-color: #fff;
      border: 3px solid #a7d9f7;
    }
    
    .tank-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      position: absolute;
      z-index: 0;
    }
    
    .water-level {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: linear-gradient(to top, rgba(0, 100, 180, 0.8), rgba(0, 160, 240, 0.9), rgba(100, 200, 255, 0.95));
      transition: height 0.8s ease-out;
      pointer-events: none;
      z-index: 1;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      box-shadow: 0 -2px 10px rgba(0, 150, 255, 0.5);
      overflow: hidden;
    }
    
    .water-level::before,
    .water-level::after {
      content: '';
      position: absolute;
      width: 120%;
      height: 20px;
      top: -10px;
      left: -10%;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 40% 40% 0 0;
      animation: realisticWave 6s infinite ease-in-out alternate;
      z-index: 2;
      transform-origin: 50% 100%;
    }
    
    .water-level::after {
      background-color: rgba(255, 255, 255, 0.2);
      animation: realisticWave 7s infinite ease-in-out alternate-reverse;
      top: -5px;
      left: -5%;
    }
    
    @keyframes realisticWave {
      0% { transform: translateX(0%) translateY(0px) rotate(0deg) scaleY(1); }
      25% { transform: translateX(10%) translateY(-2px) rotate(0.5deg) scaleY(1.02); }
      50% { transform: translateX(0%) translateY(0px) rotate(0deg) scaleY(1); }
      75% { transform: translateX(-10%) translateY(-2px) rotate(-0.5deg) scaleY(1.02); }
      100% { transform: translateX(0%) translateY(0px) rotate(0deg) scaleY(1); }
    }
    
    .data-display {
      margin: 8px auto;
      font-size: 1.05em;
      padding: 10px 15px;
      border-radius: 8px;
      text-align: center;
      background-color: #e3f2fd;
      box-shadow: 0 1px 5px rgba(0,0,0,0.08);
      color: #004d73;
      max-width: 300px;
      font-weight: 500;
    }
    
    .update-time {
      font-size: 0.9em;
      margin: 10px 0;
      color: #555;
      text-align: center;
      background: #f5f5f5;
      padding: 8px;
      border-radius: 6px;
    }
    
    #warningMessage {
      font-weight: bold;
      font-size: 0.95em;
      margin: 10px 0;
      color: #d32f2f;
      background-color: #ffebee;
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #ef9a9a;
      max-width: 300px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    
    .sensor-note {
      background-color: #fff3e0;
      color: #e65100;
      border: 1px solid #ffcc80;
      padding: 12px;
      margin: 15px auto;
      border-radius: 10px;
      font-size: 0.95em;
      line-height: 1.6;
      max-width: 380px;
      text-align: right;
      box-shadow: 0 1px 5px rgba(0,0,0,0.08);
      direction: rtl;
    }
    
    .sensor-note strong { color: #d32f2f; }
    
    .status-indicator {
      margin: 12px auto;
      padding: 8px 15px;
      border-radius: 25px;
      display: inline-block;
      font-weight: bold;
      font-size: 1em;
      color: white;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }
    
    .high-level { background-color: #28a745; }
    .medium-level { background-color: #ffc107; color: #000; }
    .low-level { background-color: #dc3545; }
    
    .pump-container, .schedule-container, .policy-box, .terms-box {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 50, 100, 0.1);
      margin-bottom: 20px;
      border: 1px solid #e0e0e0;
    }
    
    .pump-container h1, .schedule-container h1, .policy-box h2, .terms-box h2 {
      color: #007bb6;
      text-align: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .status {
      font-size: 26px;
      font-weight: bold;
      padding: 18px;
      border-radius: 12px;
      display: inline-block;
      color: white;
      animation: flash 1s infinite;
      background: linear-gradient(45deg, #28a745, #218838);
      box-shadow: 0 3px 12px rgba(40, 167, 69, 0.4);
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      text-align: center;
    }
    
    .open {
      background: linear-gradient(45deg, #28a745, #218838);
      box-shadow: 0 3px 12px rgba(40, 167, 69, 0.4);
    }
    
    .closed {
      background: linear-gradient(45deg, #dc3545, #c82333);
      box-shadow: 0 3px 12px rgba(220, 53, 69, 0.4);
    }
    
    @keyframes flash {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø­Ø§Ù„ÙŠ */
    .current-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin: 20px 0;
    }
    
    .info-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0, 50, 100, 0.1);
      width: 100%;
      max-width: 500px;
      text-align: center;
      border: 2px solid #007bb6;
    }
    
    .info-card h3 {
      color: #007bb6;
      margin-bottom: 10px;
      font-size: 20px;
    }
    
    .person-name {
      font-size: 28px;
      font-weight: bold;
      color: #004d73;
      margin: 10px 0;
    }
    
    .countdown-display {
      font-size: 36px;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      color: #d32f2f;
      margin: 10px 0;
    }
    
    .countdown-label {
      font-size: 16px;
      color: #555;
    }
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      margin-bottom: 15px;
      font-size: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      border-radius: 8px;
      overflow: hidden;
    }
    
    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
      vertical-align: middle;
    }
    
    th {
      background: #007bb6;
      color: #fff;
      font-weight: 600;
      position: sticky;
      top: 0;
    }
    
    /* NEW CSS for red strikethrough */
    .red-strike {
      color: red !important; /* Force red color */
      text-decoration: line-through !important; /* Force strikethrough */
    }

    tr.ended {
      color: #888;
      background-color: #f8f9fa;
    }
    
    tr.current {
      background-color: #e8f5e9;
      font-weight: bold;
      color: #28a745;
    }
    
    tr.emergency {
      background-color: #fff3e0;
      color: #e65100;
      font-weight: bold;
    }
    
    tr.emergency.ended {
      background-color: #ffebee;
      color: #d32f2f; /* Keep original red for ended emergency row */
    }
    
    tr:hover {
      background-color: #f1f8ff;
    }
    
    td:nth-child(3) {
      font-weight: bold;
      font-size: 16px;
    }
    
    @media (max-width: 768px) {
      .header h1 { font-size: 24px; }
      .header h2 { font-size: 20px; }
      .status { font-size: 22px; padding: 15px; }
      .person-name { font-size: 24px; }
      .countdown-display { font-size: 28px; }
      table { font-size: 14px; }
      th, td { padding: 8px; font-size: 13px; }
      .policy-box ul, .policy-box p, .terms-box ul, .terms-box p { font-size: 14px; }
      .tank-container { width: 160px; height: 220px; }
    }
    
    @media (max-width: 480px) {
      .dashboard {
        grid-template-columns: 1fr;
      }
      .header h1 { font-size: 22px; }
      .person-name { font-size: 22px; }
      .countdown-display { font-size: 24px; }
      .status { font-size: 20px; }
      .tank-container { width: 140px; height: 200px; }
      th, td { padding: 6px; font-size: 12px; }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="header">

      <h2>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø§Ø¡ ÙÙŠ Ø§Ù„Ø®Ø²Ø§Ù†</h2>
    </div>
    
    <div class="dashboard">
      <div class="tank-section">
        <div class="tank-container">
          <img src="https://i.postimg.cc/d0jvThnd/file-0000000089fc6246b605b17eb2fbc278-2.png" alt="Ø®Ø²Ø§Ù† Ù…Ø§Ø¡" class="tank-image">
          <div class="water-level" id="waterLevel"></div>
        </div>
        <div class="data-display" id="percentDisplay">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <div class="data-display" id="litersDisplay"></div>
        <div class="update-time" id="updateTime"></div>
        <div class="data-display" id="statusIndicator"></div>
        <div id="warningMessage"></div>
      </div>
      
      <div class="tank-section">
        <div class="sensor-note">
          <p><strong>Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©:</strong> Ù‚Ø¯ ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¶ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª ØºÙŠØ± Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø§Ø¡ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø¨Ø³Ø¨Ø¨ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø±Ø·ÙˆØ¨Ø© Ø¹Ù„Ù‰ Ù…Ø³ØªØ´Ø¹Ø± Ø§Ù„Ø£Ù„ØªØ±Ø§Ø³ÙˆÙ†ÙŠÙƒ.</p>
          <p>Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø¯Ù‚ Ù‚Ø±Ø§Ø¡Ø©ØŒ ÙŠØ±Ø¬Ù‰ <strong>ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¹Ø¯Ø© Ù…Ø±Ø§Øª</strong> (ÙƒÙ„ 1-2 Ø¯Ù‚ÙŠÙ‚Ø©) ÙˆÙ…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø±Ø©. Ù‡Ø°Ø§ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ ØªØ¬Ø§ÙˆØ² Ø£ÙŠ Ù‚Ø±Ø§Ø¡Ø§Øª Ù„Ø­Ø¸ÙŠØ© Ø®Ø§Ø·Ø¦Ø©.</p>
        </div>
        
        <div class="pump-container">
          <h1>Ø­Ø§Ù„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØºØ·Ø§Ø³</h1>
          <div id="pumpStatus" class="status closed">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>
      </div>
    </div>
    
    <div class="current-info">
      <div class="info-card">
        <h3>Ø³ÙÙ‚Ù’ÙˆÙÙ‡Ù Ø§Ù„ÙŠÙˆÙ…</h3>
        <div class="person-name" id="currentPerson">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      </div>
      
      <div class="info-card">
        <h3>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</h3>
        <div class="countdown-display" id="remainingTime">00:00:00</div>
        <div class="countdown-label">Ø­ØªÙ‰ Ø§Ù„Ø³Ø§Ø¹Ø© 5:00 Ù…Ø³Ø§Ø¡Ù‹ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ</div>
      </div>
    </div>
    
    <div class="schedule-container">
      <h1>Ø¬Ø¯ÙˆÙ„ Ø³Ù‚ÙŠØ§ Ø§Ù„ÙˆÙ‚Ù</h1>
      <table id="scheduleTable">
        <thead>
          <tr>
            <th>Ø§Ù„ÙŠÙˆÙ…</th>
            <th>Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</th>
            <th>Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ</th>
            <th>Ù…Ù„Ø§Ø­Ø¸Ø©</th>
          </tr>
        </thead>
        <tbody id="scheduleBody"></tbody>
      </table>
    </div>
    
    <div class="policy-box">
      <h2>Ø§Ù„Ù…Ø¤Ù‡Ù„ÙˆÙ† Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h2>
      <p>Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ù…Ø°ÙƒÙˆØ±ÙˆÙ† ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø£Ø¯Ù†Ø§Ù‡ ÙÙ‚Ø· Ù‡Ù… Ø§Ù„Ù…Ø¤Ù‡Ù„ÙˆÙ† Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙŠØ§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.</p>
      <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h2>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Ø§Ù„Ø§Ø³Ù…</th>
            <th>Ù…Ø¯Ø© Ø§Ù„Ø³Ù‚ÙŠØ§</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>ÙŠØ­ÙŠÙ‰ Ø¬Ø§Ø¨Ø±</td><td>1 Ø³Ø§Ø¹Ø©</td></tr>
          <tr><td>2</td><td>Ù…ÙØ±Ø­ ÙŠØ­ÙŠÙ‰ Ø§Ø­Ù…Ø¯</td><td>1 Ø³Ø§Ø¹Ø©</td></tr>
          <tr><td>3</td><td>Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø¶Ø§Ù†</td><td>1 Ø³Ø§Ø¹Ø©</td></tr>
          <tr><td>4</td><td>Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ù…Ø­Ù…Ø¯ Ø¬Ø§Ø¨Ø±</td><td> </td></tr>
          <tr><td>5</td><td>Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø¬Ø§Ø¨Ø±</td><td>1 Ø³Ø§Ø¹Ø©</td></tr>
          <tr><td>6</td><td>Ø­Ø³Ù† Ù…Ø­Ù…Ø¯ Ø¬Ø¨Ø§Ø±</td><td>1 Ø³Ø§Ø¹Ø©</td></tr>
          <tr><td>7</td><td>Ø®Ø²Ø§Ù†Ø§Øª Ø§Ù„Ø¬ÙŠØ±Ø§Ù† ÙÙŠ Ø§Ù„Ø­ÙŠ</td><td>1 Ø³Ø§Ø¹Ø©</td></tr>
        </tbody>
      </table>
      <div class="policy">
        ÙÙ‚Ø· Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø§Ù„Ù…Ø¯Ø±Ø¬ÙˆÙ† ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù‡Ù… Ø§Ù„Ù…Ø¤Ù‡Ù„ÙˆÙ† Ù„Ù„ØªÙˆØ§ØµÙ„ Ø¨Ø®ØµÙˆØµ Ø£ÙŠØ§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦.<br>
        Ù„Ø§ ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø£ÙŠ Ø´Ø®Øµ Ø¢Ø®Ø± ØºÙŠØ±Ù‡Ù….
      </div>
      <ul>
        <li>Ù…Ø¯Ø© Ø§Ù„Ø³Ù‚ÙŠØ§ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² <strong>Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</strong></li>
        <li>ÙŠØ¬Ø¨ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</li>
        <li>Ù„Ø§ ÙŠØªÙ… Ù…Ù†Ø­ Ø£ÙƒØ«Ø± Ù…Ù† ÙŠÙˆÙ… Ø·ÙˆØ§Ø±Ø¦ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</li>
        <li>Ø£ÙŠ ØªØ¬Ø§ÙˆØ² Ø£Ùˆ ØªÙ„Ø§Ø¹Ø¨ ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¹Ø§Ø¯Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆØ¯ÙˆÙ† ØªÙ†Ø¨ÙŠÙ‡</li>
      </ul>
      <p><strong>Ù„Ù„ØªÙˆØ§ØµÙ„ Ø¨Ø®ØµÙˆØµ Ø£ÙŠØ§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦:</strong></p>
    </div>
    
    <div class="terms-box">
      <h2>Ø´Ø±ÙˆØ· Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³Ù‚ÙŠØ§:</h2>
      <ul>
        <li><strong>ÙŠÙÙ…Ù†Ø¹ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±:</strong> ÙƒÙ„ Ø´Ø®Øµ ÙŠÙ„ØªØ²Ù… Ø¨Ø¯ÙˆØ±Ù‡ Ø§Ù„Ù…Ø­Ø¯Ø¯ØŒ ÙˆÙ„Ø§ ÙŠÙØ³Ù…Ø­ Ø¨Ø£Ø®Ø° Ø£Ùˆ Ù…Ù†Ø­ Ø§Ù„Ø¯ÙˆØ± Ù„Ø£ÙŠ Ø´Ø®Øµ Ø¢Ø®Ø±.</li>
        <li><strong>Ø§Ù„Ø³Ù‚ÙŠØ§ Ù…Ø®ØµØµØ© ÙÙ‚Ø· Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø¯ÙˆØ±:</strong> Ù„Ø§ ÙŠÙØ³Ù…Ø­ Ø¨Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø³Ù‚ÙŠØ§ Ù„Ø´Ø®Øµ Ø¢Ø®Ø± Ø£Ùˆ Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ø§ Ù†ÙŠØ§Ø¨Ø© Ø¹Ù† Ø£Ø­Ø¯.</li>
        <li><strong>Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</strong> ÙŠØ¬Ø¨ ØªØ±Ùƒ Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙÙŠ Ø§Ù„Ø®Ø²Ø§Ù† Ù„ÙŠØ³ØªÙÙŠØ¯ Ù…Ù†Ù‡ Ø§Ù„Ø´Ø®Øµ Ø§Ù„ØªØ§Ù„ÙŠØŒ ÙˆÙ„Ø§ ÙŠØªÙ… ØªØµØ±ÙŠÙÙ‡ Ù„Ø£ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¢Ø®Ø±.</li>
        <li><strong>ØªØ´ØºÙŠÙ„ ÙˆØ¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø­Ø¨Ø³ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙƒÙ„ Ø´Ø®Øµ Ø¨Ù†ÙØ³Ù‡:</strong> Ø£Ù†Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ÙˆØ­ÙŠØ¯ Ø¹Ù† ØªØ´ØºÙŠÙ„ ÙˆØ¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø­Ø¨Ø³ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒØŒ ÙˆÙ„Ø§ ØªØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ Ù„Ø·Ù„Ø¨ ØªØ´ØºÙŠÙ„Ù‡ Ø£Ùˆ Ø¥ÙŠÙ‚Ø§ÙÙ‡. Ù…Ù† ÙŠØ²Ø¹Ø¬Ù†ÙŠ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ø³ÙŠØªÙ… Ø­Ø°ÙÙ‡ Ø¯ÙˆÙ† Ø±Ø¯.</li>
        <li><strong>Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØµÙŠØ§Ù†Ø© Ø§Ù„Ù„ÙŠØ§Øª:</strong> ÙƒÙ„ Ø´Ø®Øµ Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØµÙŠØ§Ù†Ø© Ø§Ù„Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡ØŒ ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªØ³Ø±ÙŠØ¨ Ø£Ùˆ ØªÙ„Ù. Ù…Ù† ÙŠÙÙ‡Ù…Ù„ Ø£Ùˆ ÙŠÙÙ‡Ø¯Ø± Ø§Ù„Ù…Ø§Ø¡ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¹Ø§Ø¯Ù‡.</li>
        <li><strong>Ø§Ù„Ø³Ù‚ÙŠØ§ Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„:</strong> ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø§Ø¡ Ù…Ø¬Ø§Ù†Ù‹Ø§ØŒ ÙˆÙŠÙÙ…Ù†Ø¹ Ù…Ù†Ø¹Ù‹Ø§ Ø¨Ø§ØªÙ‹Ø§ Ø¨ÙŠØ¹Ù‡. ÙˆÙ…Ù† ÙŠØ«Ø¨Øª Ø¹Ù„ÙŠÙ‡ Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø§Ø¡ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¹Ø§Ø¯Ù‡ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ø³Ù‚ÙŠØ§.</li>
        <li><strong>Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ÙÙŠ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦:</strong> ÙÙŠ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ØŒ ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„ØµØ§Ø±Ù… Ø¨Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù„Ù„Ø³Ù‚ÙŠØ§. Ø£ÙŠ ØªØ¬Ø§ÙˆØ² Ø³ÙŠØªÙ… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ØŒ ÙˆØ§Ù„Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø³ÙŠÙƒÙˆÙ† ÙÙˆØ±ÙŠÙ‹Ø§ Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®Ù„ Ø¨Ø´Ø±ÙŠ.</li>
      </ul>
    </div>
  </div>

  <script>
    // ====== ÙƒÙˆØ¯ Ù‚Ø±Ø§Ø¡Ø© Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø²Ø§Ù† ======
    const TANK_HEIGHT_M = 3.90;
    const TANK_DIAMETER_M = 3.70;
    const TANK_RADIUS_M = TANK_DIAMETER_M / 2;
    const TANK_VOLUME_CUBIC_METERS = Math.PI * Math.pow(TANK_RADIUS_M, 2) * TANK_HEIGHT_M;
    const TOTAL_TANK_VOLUME_LITERS = TANK_VOLUME_CUBIC_METERS * 1000;
    const apiUrl = "https://script.google.com/macros/s/AKfycbzVB7uPTsNbotACV0aWTb7Y37wsI47BwCVbz_l4kitBgOBv9r_wTQJQGGWfjyGMU4ky/exec";

    // Ø¯Ø§Ù„Ø© Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ù†Ø³Ø¨Ø©
    function correctPercentage(raw) {
      const maxSensorValue = 94;
      return Math.min(100, (raw / maxSensorValue) * 100);
    }

    function fetchWaterData() {
      fetch(apiUrl)
        .then(res => {
          if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
          return res.json();
        })
        .then(data => {
          const percentRaw = parseFloat(data.percent) || 0;
          const percentCorrected = correctPercentage(percentRaw);
          let updated = data.lastUpdated || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
          const currentLiters = (percentCorrected / 100) * TOTAL_TANK_VOLUME_LITERS;

          document.getElementById("waterLevel").style.height = percentCorrected.toFixed(2) + "%";
          document.getElementById("percentDisplay").textContent = `Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${percentCorrected.toFixed(2)}%`;
          document.getElementById("litersDisplay").textContent = `Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${currentLiters.toFixed(2)} Ù„ØªØ±`;

          // --- Ø¹Ø±Ø¶ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø¯ÙŠØ« ---
          const now = new Date();
          let displayTimeText;
          if (updated.includes("1899") || updated.includes("Dec 30 1899")) {
            const currentHour = now.getHours().toString().padStart(2, '0');
            const currentMinute = now.getMinutes().toString().padStart(2, '0');
            const currentSecond = now.getSeconds().toString().padStart(2, '0');
            displayTimeText = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: Ø§Ù„Ø¢Ù† (${currentHour}:${currentMinute}:${currentSecond})`;
          } else {
            try {
              const lastUpdateTime = new Date(updated);
              if (isNaN(lastUpdateTime.getTime())) {
                displayTimeText = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${updated} (ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…ÙÙ‡ÙˆÙ…)`;
              } else {
                const diffMilliseconds = now - lastUpdateTime;
                const seconds = Math.floor(diffMilliseconds / 1000);
                const minutes = Math.floor(seconds / 60);
                const hours = Math.floor(minutes / 60);
                const days = Math.floor(hours / 24);
                let timeAgoText = "Ù…Ù†Ø° Ù„Ø­Ø¸Ø§Øª";
                if (seconds > 0 && seconds < 60) {
                  timeAgoText = `Ù…Ù†Ø° ${seconds} Ø«Ø§Ù†ÙŠØ©`;
                } else if (minutes >= 1 && minutes < 60) {
                  timeAgoText = `Ù…Ù†Ø° ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
                } else if (hours >= 1 && hours < 24) {
                  timeAgoText = `Ù…Ù†Ø° ${hours} Ø³Ø§Ø¹Ø©`;
                } else if (days >= 1) {
                  timeAgoText = `Ù…Ù†Ø° ${days} ÙŠÙˆÙ…`;
                }
                displayTimeText = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${updated} (${timeAgoText})`;
              }
            } catch (e) {
              console.warn("Could not parse date for 'time ago' calculation:", updated, e);
              displayTimeText = `Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${updated} (Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª)`;
            }
          }
          document.getElementById("updateTime").textContent = displayTimeText;
          // --- Ù†Ù‡Ø§ÙŠØ© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª ---

          const warning = document.getElementById("warningMessage");
          const indicator = document.getElementById("statusIndicator");
          if (percentCorrected >= 75) {
            indicator.textContent = "Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù…Ø±ØªÙØ¹";
            indicator.className = "data-display status-indicator high-level";
            warning.textContent = "";
          } else if (percentCorrected >= 25 && percentCorrected < 75) {
            indicator.textContent = "Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·";
            indicator.className = "data-display status-indicator medium-level";
            warning.textContent = "";
          } else {
            indicator.textContent = "Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù…Ù†Ø®ÙØ¶";
            indicator.className = "data-display status-indicator low-level";
            warning.textContent = "! Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø§Ø¡ Ù…Ù†Ø®ÙØ¶ Ø¬Ø¯Ù‹Ø§ - Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ¹Ø¨Ø¦Ø©";
          }
        })
        .catch(err => {
          console.error("Error fetching data:", err);
          document.getElementById("percentDisplay").textContent = "ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
          document.getElementById("litersDisplay").textContent = "";
          document.getElementById("updateTime").textContent = "ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø·.";
        });
    }

    fetchWaterData();
    setInterval(fetchWaterData, 60000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©

    // ====== ÙƒÙˆØ¯ Ø­Ø§Ù„Ø© Ø§Ù„ØºØ·Ø§Ø³ ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„ ======
    const people = [
      "Ù…ÙØ±Ø­ Ø¹Ù…Ø¶Ø§Ù†", "Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø¶Ø§Ù†", "Ù…ÙØ±Ø­ Ø¬Ø§Ø¨Ø±", "ÙŠØ­ÙŠÙ‰ Ø¨Ù† Ø¬Ø§Ø¨Ø±", "Ø¹Ù„ÙŠ ÙŠØ­ÙŠÙ‰",
      "Ø§Ø­Ù…Ø¯ Ù…ÙØ±Ø­", "ÙŠØ­ÙŠÙ‰ Ù…ÙØ±Ø­", "Ø¬Ø§Ø¨Ø± ÙŠØ­ÙŠÙ‰", "Ø­Ø³ÙŠÙ† ÙŠØ­ÙŠÙ‰", "Ù…Ø­Ù…Ø¯ Ù…ÙØ±Ø­",
      "Ø¹Ù„ÙŠ Ø¬Ø§Ø¨Ø±","Ù…Ø­Ù…Ø¯ ÙŠØ­ÙŠÙ‰ ", "Ø¹Ù„ÙŠ Ø§Ø­Ù…Ø¯", "Ù…Ø­Ù…Ø¯ Ø§Ø­Ù…Ø¯", "Ù…Ø§Ø·Ø± Ø§Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
      "Ù‚Ø§Ø³Ù… Ø¬Ø§Ø¨Ø±", "Ø¬Ø§Ø¨Ø± Ø­Ø³ÙŠÙ†", "Ù…ÙØ±Ø­ Ø§Ø­Ù…Ø¯", "ÙŠØ­ÙŠÙ‰ Ø¹Ù„ÙŠ", "Ø¬Ø§Ø¨Ø± Ø§Ø­Ù…Ø¯",
      "Ø§Ø­Ù…Ø¯ Ø¨Ù† ÙŠØ­ÙŠÙ‰", "Ù…ÙˆØ³Ù‰ Ø¹Ù…Ø¶Ø§Ù†", "Ø§Ø­Ù…Ø¯ Ø´ÙˆØ¹Ø§Ù† ", " Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø¬Ø¨Ø§Ø±", " ØµÙŠØ§Ù†Ù‡ ğŸ”§ğŸ§°"
    ];
    let emergencyDays = [5, 10, 15, 20, 25];

    function updatePumpStatus() {
      const now = new Date();
      let h = now.getHours(), m = now.getMinutes();
      const el = document.getElementById("pumpStatus");
      if ((h > 17 && h < 21) || (h === 17 && m >= 0) || (h === 21 && m === 0)) {
        el.textContent = "Ø§Ù„ØºØ·Ø§Ø³ Ø§Ù„Ø¢Ù† Ù…ÙØªÙˆØ­ØŒ Ø­ØªÙ‰ Ø§Ù„Ø³Ø§Ø¹Ø© 9:00 Ù…Ø³Ø§Ø¡Ù‹";
        el.className = "status open";
      } else {
        el.textContent = "Ø§Ù„ØºØ·Ø§Ø³ Ø§Ù„Ø¢Ù† Ù…ØºÙ„Ù‚ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ø§Ø¹Ø© 5:00 Ù…Ø³Ø§Ø¡Ù‹";
        el.className = "status closed";
      }
    }

    function showTodayPerson() {
      const now = new Date();
      let today = new Date();
      // If current time is past 5 PM, consider the "current day" for display as the next day's schedule
      if (now.getHours() >= 17) {
        today.setDate(today.getDate() + 1);
      }
      const day = today.getDate();
      let currentPerson = "";

      if (emergencyDays.includes(day)) {
          currentPerson = "ÙŠÙˆÙ… Ø·ÙˆØ§Ø±Ø¦";
      } else {
          const realDay = day - emergencyDays.filter(d => d < day).length;
          currentPerson = people[(realDay - 1) % people.length];
      }
      document.getElementById('currentPerson').textContent = currentPerson;
    }

    // ØªØ­Ø³ÙŠÙ† Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
    function updateRemainingTime() {
      const now = new Date();
      let end = new Date();
      
      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 5 Ù…Ø³Ø§Ø¡Ù‹ØŒ Ù†Ø¶ÙŠÙ ÙŠÙˆÙ…Ù‹Ø§ Ø¥Ø¶Ø§ÙÙŠÙ‹Ø§
      if (now.getHours() >= 17) {
        end.setDate(end.getDate() + 1);
      }
      
      // Ø¶Ø¨Ø· ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø¥Ù„Ù‰ 5:00 Ù…Ø³Ø§Ø¡Ù‹
      end.setHours(17, 0, 0, 0);
      
      const diff = end - now;
      
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø§Øª ÙˆØ§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ ÙˆØ§Ù„Ø«ÙˆØ§Ù†ÙŠ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Ø£ØµÙØ§Ø± Ø£Ù…Ø§Ù…ÙŠØ©
      const formattedHours = hours.toString().padStart(2, '0');
      const formattedMinutes = minutes.toString().padStart(2, '0');
      const formattedSeconds = seconds.toString().padStart(2, '0');
      
      // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
      document.getElementById('remainingTime').textContent = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
    }

    function getDayStatus(date) {
      const now = new Date();
      const currentDay = now.getDate();
      const currentMonth = now.getMonth();
      const currentYear = now.getFullYear();
      const targetDay = date.getDate();
      const targetMonth = date.getMonth();
      const targetYear = date.getFullYear();

      // Check if the target date is in the past
      if (targetYear < currentYear || 
         (targetYear === currentYear && targetMonth < currentMonth) || 
         (targetYear === currentYear && targetMonth === currentMonth && targetDay < currentDay)) {
        return "ended";
      }

      // Check if it's today's scheduled day
      if (targetYear === currentYear && targetMonth === currentMonth && targetDay === currentDay) {
        if (now.getHours() >= 17) { // If it's past 5 PM on the current day, it's considered "ended" for today's entry
          return "ended";
        }
        return "current";
      }
      
      // Check if it's the next day's schedule (if current hour is past 5 PM today)
      const nextDay = new Date(now);
      nextDay.setDate(now.getDate() + 1);
      if (now.getHours() >= 17 && 
          targetYear === nextDay.getFullYear() && 
          targetMonth === nextDay.getMonth() && 
          targetDay === nextDay.getDate()) {
        return "current";
      }

      return "normal";
    }

    function getDayName(date) {
      const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
      return days[date.getDay()];
    }

    function generateSchedule() {
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth(); // 0-indexed month
      const daysInMonth = new Date(year, month + 1, 0).getDate(); // Get days in current month
      const tbody = document.getElementById('scheduleBody');
      tbody.innerHTML = '';
      let personIndex = 0;
      
      // Ensure emergencyDays are within the current month's bounds
      let currentMonthEmergencyDays = emergencyDays.filter(day => day <= daysInMonth);

      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const row = document.createElement('tr');
        const dayStatus = getDayStatus(date);
        
        const isEmergencyDay = currentMonthEmergencyDays.includes(day);

        let personOrEmergencyContent = '';
        let noteText = '';

        if (isEmergencyDay) {
            personOrEmergencyContent = 'ÙŠÙˆÙ… Ø·ÙˆØ§Ø±Ø¦';
            if (dayStatus === "ended") {
                noteText = '<span class="red-strike">Ø§Ù†ØªÙ‡Øª</span>';
            } else if (dayStatus === "current") {
                noteText = 'ÙŠÙˆÙ… Ø·ÙˆØ§Ø±Ø¦ (Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°)';
            } else {
                noteText = 'ÙŠÙˆÙ… Ø·ÙˆØ§Ø±Ø¦';
            }
        } else {
            // Calculate personIndex skipping emergency days
            const adjustedDay = day - currentMonthEmergencyDays.filter(d => d < day).length;
            const personName = people[(adjustedDay - 1) % people.length];
            
            if (dayStatus === "ended") {
                personOrEmergencyContent = `<span class="red-strike">${personName}</span>`;
                noteText = '<span class="red-strike">Ø§Ù†ØªÙ‡Øª</span>';
            } else {
                personOrEmergencyContent = personName;
                if (dayStatus === "current") {
                    noteText = 'ÙŠØ³ØªÙ‚ÙŠ Ø§Ù„Ø¢Ù†';
                } else {
                    noteText = '-';
                }
            }
        }
        
        // Apply row classes based on status
        if (dayStatus === "ended") {
            row.classList.add('ended');
            if (isEmergencyDay) {
                row.classList.add('emergency'); // Add emergency class even if ended for background color
            }
        } else if (dayStatus === "current") {
            row.classList.add('current');
            if (isEmergencyDay) {
                row.classList.add('emergency'); // Add emergency class even if current for background color
            }
        } else if (isEmergencyDay) {
            row.classList.add('emergency');
        }

        row.innerHTML = `
          <td>${getDayName(date)}</td>
          <td>${date.toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric', numberingSystem: 'latn' })}</td>
          <td>${personOrEmergencyContent}</td>
          <td>${noteText}</td>
        `;
        
        tbody.appendChild(row);
      }
    }

    window.onload = function () {
      updatePumpStatus();
      generateSchedule();
      showTodayPerson();
      updateRemainingTime();
      setInterval(updatePumpStatus, 60000);
      setInterval(updateRemainingTime, 1000);
      setInterval(showTodayPerson, 60000);
      setInterval(generateSchedule, 60000); // Refresh schedule periodically to update 'ended' status
    };
  </script>
</body>
</html>
